<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<script src="js/jquery.js"></script>
<style>
    body{
        margin: 0;
        padding: 0;
    }
    div{
        width: 200px;
        height: 200px;
        cursor: pointer;
        position: fixed;
        top: 0;
        left: 0;
        background: yellowgreen;
    }
</style>
<body>
<div></div>
<div></div>
</body>
</html>
<script type="text/javascript">
    class drags{
        constructor(obj,type){
            this.type=type||"all";
            this.obj=obj;
            this.cw=document.documentElement.clientWidth;
            this.ch=document.documentElement.clientHeight;
            this.ow=this.obj.width();
            this.oh=this.obj.height();
            this.ox=0;
            this.oy=0;
            this.cx=0;
            this.cy=0;
            this.x=0;
            this.y=0;
            this.oldl=0;
            this.oldt=0;
            this.flag=true;
        }
        drag(){
            this.resize();
            this.down();
        }
        down(){
            var that=this;
            this.obj.mousedown(function(e){
                that.ox=e.offsetX;
                that.oy=e.offsetY;
                that.flag=true;
                that.move();
                that.up();
            })
        }
        move(){
            var that=this;
            $(document).mousemove(function(e){
                that.cx=e.clientX;
                that.cy=e.clientY;
                if(that.flag){
                    that.flag=false;
                    that.oldl=that.cx;
                    that.oldt=that.cy;
                }
                that.x=that.cx-that.ox;
                that.y=that.cy-that.oy;
                if(that.x<0){that.x=0;};
                if(that.y<0){that.y=0;};
                if(that.x>that.cw-that.ow){that.x=that.cw-that.ow};
                if(that.y>that.ch-that.oh){that.y=that.ch-that.oh};
                if(that.type=="all"){
                    that.obj.css({
                        left:that.x+"px",
                        top:that.y+"px"
                    });
                }else if(that.type=="top"){
                    that.obj.css("top",y+"px");
                }else if(that.type=="left"){
                    that.obj.css("left",x+"px");
                }
            })
        }
        up(){
            var that=this;
            $(document).mouseup(function(e){
                $(this).unbind();
                that.huancun();
            })
        }
        resize(){
            var that=this;
            $(window).resize(function(){
                that.cw=document.documentElement.clientWidth;
                that.ch=document.documentElement.clientHeight;
                var ol=that.obj.offset().left;
                var ot=that.obj.offset().top;
                if(ol>that.cw-that.ow){that.obj.css("left",(that.cw-that.ow)+"px")};
                if(ot>that.ch-that.oh){that.obj.css("top",(that.ch-that.oh)+"px")};
            })
        }
       
    }
    new drags($("div")).drag();
</script>
